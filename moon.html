<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Moon Days</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 20px;
    }
    .year {
      margin-bottom: 20px;
    }
    .month {
      margin-bottom: 10px;
    }
    .current-moon {
      color: red;
      font-weight: bold;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      margin: 5px 0;
    }
  </style>
</head>
<body>
  <div id="moonDays"></div>

  <script>
    const moonDays = {
      2025: [
        { date: "2025-01-14", phase: "○" },
        { date: "2025-01-29", phase: "●" },
        { date: "2025-02-12", phase: "○" },
        { date: "2025-02-28", phase: "●" },
        { date: "2025-03-14", phase: "○" },
        { date: "2025-03-29", phase: "●" },
        { date: "2025-04-13", phase: "○" },
        { date: "2025-04-28", phase: "●" },
        { date: "2025-05-13", phase: "○" },
        { date: "2025-05-27", phase: "●" },
        { date: "2025-06-11", phase: "○" },
        { date: "2025-06-25", phase: "●" },
        { date: "2025-07-11", phase: "○" },
        { date: "2025-07-25", phase: "●" },
        { date: "2025-08-09", phase: "○" },
        { date: "2025-08-23", phase: "●" },
        { date: "2025-09-08", phase: "○" },
        { date: "2025-09-22", phase: "●" },
        { date: "2025-10-07", phase: "○" },
        { date: "2025-10-21", phase: "●" },
        { date: "2025-11-05", phase: "○" },
        { date: "2025-11-20", phase: "●" },
        { date: "2025-12-05", phase: "○" },
        { date: "2025-12-20", phase: "●" }
      ],
      2026: [
        { date: "2026-01-02", phase: "○" },
        { date: "2026-01-17", phase: "●" },
        { date: "2026-01-31", phase: "○" },
        { date: "2026-02-16", phase: "●" },
        { date: "2026-03-02", phase: "○" },
        { date: "2026-03-18", phase: "●" },
        { date: "2026-04-01", phase: "○" },
        { date: "2026-04-16", phase: "●" },
        { date: "2026-04-30", phase: "○" },
        { date: "2026-05-16", phase: "●" },
        { date: "2026-05-30", phase: "○" },
        { date: "2026-06-14", phase: "●" },
        { date: "2026-06-28", phase: "○" },
        { date: "2026-07-14", phase: "●" },
        { date: "2026-07-28", phase: "○" },
        { date: "2026-08-12", phase: "●" },
        { date: "2026-08-26", phase: "○" },
        { date: "2026-09-10", phase: "●" },
        { date: "2026-09-25", phase: "○" },
        { date: "2026-10-09", phase: "●" },
        { date: "2026-10-24", phase: "○" },
        { date: "2026-11-08", phase: "●" },
        { date: "2026-12-07", phase: "●" }
      ],
      2027: [
        { date: "2027-01-06", phase: "○" },
        { date: "2027-01-20", phase: "●" },
        { date: "2027-02-04", phase: "○" },
        { date: "2027-02-18", phase: "●" },
        { date: "2027-03-05", phase: "○" },
        { date: "2027-03-19", phase: "●" },
        { date: "2027-04-03", phase: "○" },
        { date: "2027-04-17", phase: "●" },
        { date: "2027-05-02", phase: "○" },
        { date: "2027-05-16", phase: "●" },
        { date: "2027-06-01", phase: "○" },
        { date: "2027-06-15", phase: "●" },
        { date: "2027-07-01", phase: "○" },
        { date: "2027-07-16", phase: "●" },
        { date: "2027-08-01", phase: "○" },
        { date: "2027-08-15", phase: "●" },
        { date: "2027-09-01", phase: "○" },
        { date: "2027-09-15", phase: "●" },
        { date: "2027-10-01", phase: "○" },
        { date: "2027-10-15", phase: "●" },
        { date: "2027-11-01", phase: "○" },
        { date: "2027-11-15", phase: "●" },
        { date: "2027-12-01", phase: "○" },
        { date: "2027-12-15", phase: "●" }
      ]
    };

    const currentDate = new Date();

    // 날짜를 YYYY-MM-DD 형식으로 변환
    function formatDate(date) {
      const d = new Date(date);
      return `${d.getFullYear()}-${(d.getMonth() + 1).toString().padStart(2, '0')}-${d
        .getDate()
        .toString()
        .padStart(2, '0')}`;
    }

    // 가장 가까운 미래 문데이 찾기
    function getNextMoonDay() {
      const allMoonDays = Object.values(moonDays).flat();
      const futureMoonDays = allMoonDays.filter(day => new Date(day.date) >= currentDate);
      return futureMoonDays.length > 0 ? futureMoonDays[0].date : null;
    }

    function displayMoonDays() {
      const moonDaysContainer = document.getElementById('moonDays');
      moonDaysContainer.innerHTML = ""; // 기존 데이터 초기화

      const nextMoonDay = getNextMoonDay(); // 가장 가까운 다가오는 문데이

      for (let year in moonDays) {
        const yearDiv = document.createElement('div');
        yearDiv.classList.add('year');
        const yearTitle = document.createElement('h2');
        yearTitle.innerText = `${year}년`;
        yearDiv.appendChild(yearTitle);

        moonDays[year].forEach(day => {
          const moonDate = new Date(day.date);

          // 지난 문데이는 표시하지 않음
          if (moonDate < currentDate) return;

          const li = document.createElement('li');
          li.innerText = `${formatDate(day.date)} (${day.phase})`;

          // 다가오는 다음 문데이는 빨간색 강조
          if (day.date === nextMoonDay) {
            li.classList.add('current-moon');
          }

          yearDiv.appendChild(li);
        });

        moonDaysContainer.appendChild(yearDiv);
      }
    }

    // 24시간마다 새로고침
    setInterval(() => {
      displayMoonDays();
    }, 86400000); // 86400000ms = 24시간

    displayMoonDays();
  </script>
</body>
</html>